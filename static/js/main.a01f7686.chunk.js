(window["webpackJsonpbooks-app"]=window["webpackJsonpbooks-app"]||[]).push([[0],{33:function(e,t,a){e.exports=a(67)},39:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var o=a(1),n=a.n(o),l=a(15),i=a.n(l),r=(a(38),a(39),a(9)),c=a(10),s=a(12),d=a(11),h=a(4),u=a(13),k=a(7),m=a.n(k),E=a(68),y=a(76),B=a(69),f=a(70),g=a(71),p=a(72),v=a(73),w=a(74),b=a(75),D=function(e){return n.a.createElement("div",null,n.a.createElement("center",null,n.a.createElement("h5",null,e.name)))};o.Component;var C=function(){return n.a.createElement("center",null,"---- end of the list ----")};o.Component;var S=function(e){return n.a.createElement(E.a,{id:"Btn1",onClick:function(){return e.greethandler2("from child")}},"Search ")},M="https://royliao.pythonanywhere.com/api/article/",A=(o.Component,function(e){var t=e.results.map(function(t){return n.a.createElement("li",{key:t.id,onClick:function(){return e.action(t.title)}},t.title)});return n.a.createElement("ul",null,t)}),N=(Object({NODE_ENV:"production",PUBLIC_URL:"/books-app"}).API_KEY,"https://royliao.pythonanywhere.com/api/article/"),I=(o.Component,"https://royliao.pythonanywhere.com/api/article/"),_=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).state={searchkey:"",newseachkey:"",books:[],newBookData:{title:"",desc:"",year:""},headerInfo:{"content-type":"application/json","Access-Control-Allow-Origin":"*"},newBookModal:!1,editBookData:{id:"",title:"",desc:"",year:""},editBookModal:!1,mymessage:""},a.getsearch2=function(){m.a.get("".concat(I,"?search=").concat(a.state.searchkey)).then(function(e){a.setState({books:e.data},function(){console.log("title:")})})},a.handleInputChanger=function(){a.setState({searchkey:a.search.value},function(){a.state.searchkey&&a.state.searchkey.length>0?(a.getInfo(),a.UNSAFE_componentWillMount()):a.state.searchkey||window.location.reload(!0)})},a.getInfo=function(){m.a.get("".concat(I,"?search=").concat(a.state.searchkey)).then(function(e){var t=e.data;a.setState({results:t})})},a._refreshBooks=a._refreshBooks.bind(Object(h.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"toggleNewBookModal",value:function(){this.setState({newBookModal:!this.state.newBookModal})}},{key:"toggleEditBookModal",value:function(){this.setState({editBookModal:!this.state.editBookModal})}},{key:"addBook",value:function(){var e=this;m.a.post("".concat(I),this.state.newBookData,this.state.headerInfo).then(function(t){var a=e.state.books;a.push(t.data),e.setState({mymessage:"Book Title "+e.state.newBookData.title+" is added!"}),e.setState({books:a,newBookModal:!1,newBookData:{title:"",desc:"",year:""}})})}},{key:"editBook",value:function(e,t,a,o){this.setState({editBookData:{id:e,title:t,desc:a,year:o},editBookModal:!this.state.editBookModal})}},{key:"updateBook",value:function(){var e=this,t=this.state.editBookData,a=t.id,o=t.title,n=t.desc,l=t.year;m.a.put("".concat(I)+this.state.editBookData.id+"/",{id:a,title:o,desc:n,year:l},this.state.headerInfo).then(function(t){e._refreshBooks()}),this.setState({mymessage:"Book ID "+this.state.editBookData.id+" is edited!"}),this.setState({editBookModal:!1,editBookData:{id:"",title:"",desc:"",year:""}})}},{key:"deleteBook",value:function(e){var t=this;m.a.delete("".concat(I)+e+"/").then(function(a){t._refreshBooks(),t.setState({mymessage:"Book ID "+e+" is deleted!"})})}},{key:"UNSAFE_componentWillMount",value:function(){var e=this;""===this.state.searchkey&&null===this.state.searchkey||m.a.get("".concat(I,"?search=").concat(this.state.searchkey)).then(function(t){e.setState({books:t.data})})}},{key:"UNSAFE_componentWillMount2",value:function(){var e=this;""!==this.state.searchkey||null!==this.state.searchkey?m.a.get("".concat(I,"?search=").concat(this.state.searchkey)).then(function(t){e.setState({books:t.data})}):(window.location.reload(!0),alert("thh"))}},{key:"_refreshBooks",value:function(){var e=this;m.a.get("".concat(I)).then(function(t){e.setState({books:t.data})})}},{key:"render",value:function(){var e=this,t=this.state.books.map(function(t){return n.a.createElement("tr",{key:t.id},n.a.createElement("td",null,t.id),n.a.createElement("td",null,t.title),n.a.createElement("td",null,t.desc),n.a.createElement("td",null,t.year),n.a.createElement("td",null,n.a.createElement(E.a,{color:"success",size:"sm",className:"mr-2",onClick:e.editBook.bind(e,t.id,t.title,t.desc,t.year)},"Edit"),n.a.createElement(E.a,{color:"danger",size:"sm",onClick:e.deleteBook.bind(e,t.id)},"Delete")))});return n.a.createElement("div",{className:"App container"},n.a.createElement(D,{name:this.state.mymessage}),n.a.createElement("center",null,n.a.createElement("div",{class:"row"},n.a.createElement("h3",{style:{marginTop:25}},"List of Articles"),"\u2003",n.a.createElement(E.a,{color:"primary",style:{marginTop:25},onClick:this.toggleNewBookModal.bind(this)},"Add Book"),n.a.createElement("input",{input:!0,class:"form-control mr-sm-2",style:{marginLeft:"auto",marginTop:25,width:200},placeholder:"Search for the ..",ref:function(t){return e.search=t},onChange:this.handleInputChanger,onkeypress:"return event.keyCode!=13"}),n.a.createElement(E.a,{id:"btn26",class:"btn btn-outline-success my-2 my-sm-0",color:"primary",style:{marginTop:25},onClick:this.UNSAFE_componentWillMount2.bind(this)},"Search"))),n.a.createElement("br",null),n.a.createElement(y.a,{isOpen:this.state.newBookModal,toggle:this.toggleNewBookModal.bind(this)},n.a.createElement(B.a,{toggle:this.toggleNewBookModal.bind(this)},"Add a new book"),n.a.createElement(f.a,null,n.a.createElement(g.a,null,n.a.createElement(p.a,{for:"title"},"Title"),n.a.createElement(v.a,{id:"title",value:this.state.newBookData.title,onChange:function(t){var a=e.state.newBookData;a.title=t.target.value,e.setState({newBookData:a})}})),n.a.createElement(g.a,null,n.a.createElement(p.a,{for:"desc"},"Description"),n.a.createElement(v.a,{id:"desc",value:this.state.newBookData.desc,onChange:function(t){var a=e.state.newBookData;a.desc=t.target.value,e.setState({newBookData:a})}})),n.a.createElement(g.a,null,n.a.createElement(p.a,{for:"year"},"Year"),n.a.createElement(v.a,{id:"year",value:this.state.newBookData.year,onChange:function(t){var a=e.state.newBookData;a.year=t.target.value,e.setState({newBookData:a})}}))),n.a.createElement(w.a,null,n.a.createElement(w.a,null,n.a.createElement(E.a,{color:"primary",onClick:this.addBook.bind(this)},"Add Book")," ",n.a.createElement(E.a,{color:"secondary",onClick:this.toggleNewBookModal.bind(this)},"Cancel")))),n.a.createElement(y.a,{isOpen:this.state.editBookModal,toggle:this.toggleEditBookModal.bind(this)},n.a.createElement(B.a,{toggle:this.toggleEditBookModal.bind(this)},"Edit a new book"),n.a.createElement(f.a,null,n.a.createElement(g.a,null,n.a.createElement(p.a,{for:"title"},"Title"),n.a.createElement(v.a,{id:"title",value:this.state.editBookData.title,onChange:function(t){var a=e.state.editBookData;a.title=t.target.value,e.setState({editBookData:a})}})),n.a.createElement(g.a,null,n.a.createElement(p.a,{for:"desc"},"Description"),n.a.createElement(v.a,{id:"desc",value:this.state.editBookData.desc,onChange:function(t){var a=e.state.editBookData;a.desc=t.target.value,e.setState({editBookData:a})}})),n.a.createElement(g.a,null,n.a.createElement(p.a,{for:"year"},"Year"),n.a.createElement(v.a,{id:"year",value:this.state.editBookData.year,onChange:function(t){var a=e.state.editBookData;a.year=t.target.value,e.setState({editBookData:a})}}))),n.a.createElement(w.a,null,n.a.createElement(E.a,{color:"primary",onClick:this.updateBook.bind(this)},"Update Book")," ",n.a.createElement(E.a,{color:"secondary",onClick:this.toggleEditBookModal.bind(this)},"Cancel"))),n.a.createElement(b.a,null,n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"#"),n.a.createElement("th",null,"Title"),n.a.createElement("th",null,"Desc"),n.a.createElement("th",null,"Year"),n.a.createElement("th",null,"Action"))),n.a.createElement("tbody",null,t)),n.a.createElement("center",null,n.a.createElement(C,null)))}}]),t}(o.Component);i.a.render(n.a.createElement(_,null),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.a01f7686.chunk.js.map